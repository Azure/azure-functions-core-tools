jobs:
- job: Windows_Unit_Test
  displayName: 'Unit Test: Windows'

  pool:
    name: 1es-pool-azfunc-public
    image: 1es-windows-2022
    os: windows

  steps:
  - task: UseDotNet@2
    displayName: Install .NET SDK from global.json
    inputs:
      packageType: sdk
      useGlobalJson: true

  # The windows part of ZipHelpers test will create a Zip file that we need to download and test on Linux.
  - template: /eng/ci/templates/public/steps/run-unit-tests.yml@self

  templateContext:
    outputs:
    - output: pipelineArtifact
      path: 'out/bin/Azure.Functions.Cli.UnitTests/debug/ZippedOnWindows.zip'
      artifact: ZippedOnWindows
